(()=>{"use strict";const o=window.wp.blocks,t=window.wp.i18n,i=window.wp.blockEditor,n=window.wp.components,s=window.React,e=window.wp.primitives,p=(0,s.createElement)(e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(e.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})),l=window.ReactJSXRuntime,c=JSON.parse('{"UU":"woo-vipps/buy-now"}');(0,o.registerBlockType)(c.UU,{edit:function({context:o,attributes:e,setAttributes:c}){var r,u;const[a,d]=(0,s.useState)(String(e.productId));o.query&&c({hasProductContext:!0});const w=null!==(u=(null!==(r=vippsBuyNowBlockConfig.logos[e.language])&&void 0!==r?r:vippsBuyNowBlockConfig.logos.en)[e.variant])&&void 0!==u?u:"default";console.log(e),console.log(!!e.hasProductContext),console.log(!!e.productId);const v=!e.hasProductContext,[h,g]=(0,s.useState)(!(e.hasProductContext||e.productId));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{...(0,i.useBlockProps)({className:"wp-block-button wc-block-components-product-button wc-block-button-vipps"}),children:h?(0,l.jsxs)("div",{children:[(0,l.jsx)(n.TextControl,{label:vippsBuyNowBlockConfig.vippsbuynowbutton,help:(0,t.__)("Enter the post id of the product this button should buy","woo-vipps"),value:a,onChange:o=>d(o),placeholder:(0,t.__)("Product ID","woo-vipps")}),(0,l.jsx)(n.Button,{variant:"primary",onClick:()=>{let o=a.trim();o&&!isNaN(Number(o))&&(c({productId:o}),g(!1))},children:(0,t.__)("Confirm","woo-vipps")})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("a",{className:"single-product button vipps-buy-now wp-block-button__link",title:vippsBuyNowBlockConfig.BuyNowWithVipps,children:(0,l.jsx)("img",{className:"inline vipps-logo-negative",src:w,alt:vippsBuyNowBlockConfig.BuyNowWithVipps})}),v&&(0,l.jsx)(i.BlockControls,{children:(0,l.jsx)(n.ToolbarGroup,{children:(0,l.jsx)(n.ToolbarButton,{icon:p,label:(0,t.__)("Edit product ID","woo-vipps"),onClick:()=>g(!0)})})})]})}),(0,l.jsxs)(i.InspectorControls,{children:[(0,l.jsx)(n.TextControl,{label:(0,t.__)("Product id","woo-vipps"),help:(0,t.__)("Enter the post id of the product this button should buy","woo-vipps"),value:e.productId,onChange:o=>c({productId:o}),placeholder:(0,t.__)("Product post ID","woo-vipps")}),(0,l.jsxs)(n.PanelBody,{children:[(0,l.jsx)(n.SelectControl,{onChange:o=>c({variant:o}),label:(0,t.__)("Variant","woo-vipps"),value:e.variant,options:vippsBuyNowBlockConfig.variants,help:(0,t.__)("Choose the button variant with the perfect fit for your site","woo-vipps")}),(0,l.jsx)(n.SelectControl,{onChange:o=>c({language:o}),label:(0,t.__)("Language","woo-vipps"),value:e.language,options:vippsBuyNowBlockConfig.languages,help:(0,t.__)("Choose language","woo-vipps")})]})]})]})},title:vippsBuyNowBlockConfig.vippsbuynowbutton,description:vippsBuyNowBlockConfig.vippsbuynowdescription,icon:(0,l.jsx)("img",{className:"block-editor-block-icon has-colors vipps-smile vipps-component-cion",src:vippsBuyNowBlockConfig.vippssmileurl})})})();