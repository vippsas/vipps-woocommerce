(()=>{"use strict";var e={n:r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.element,n=window.wp.apiFetch;var t=e.n(n);const i=window.wp.i18n,c=window.ReactJSXRuntime;function a({logo:e}){return(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page",children:(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container",children:(0,c.jsxs)("div",{className:"vipps-recurring-payment-redirect-page__container__content",children:[(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container__content__logo",children:(0,c.jsx)("img",{src:e,alt:"Logo"})}),(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container__content__loading",children:(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container__content__loading__spinner"})}),(0,c.jsxs)("div",{className:"vipps-recurring-payment-redirect-page__container__content__text",children:[(0,c.jsx)("p",{children:(0,i.__)("Verifying your payment. Please wait.","woo-vipps")}),(0,c.jsx)("p",{children:(0,i.__)("You will be redirected shortly.","woo-vipps")})]})]})})})}function s({continueShoppingUrl:e,logo:r}){return(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page",children:(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container",children:(0,c.jsxs)("div",{className:"vipps-recurring-payment-redirect-page__container__content",children:[(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container__content__logo",children:(0,c.jsx)("img",{src:r,alt:"Logo"})}),(0,c.jsxs)("div",{className:"vipps-recurring-payment-redirect-page__container__content__text",children:[(0,c.jsx)("p",{children:(0,c.jsx)("h1",{className:"vipps-recurring-payment-redirect-page__container__content__text__heading",children:(0,i.__)("Order cancelled","woo-vipps")})}),(0,c.jsx)("p",{children:(0,i.__)("Your payment has been cancelled.","woo-vipps")}),(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:e,className:"btn button vipps-recurring-payment-redirect-page__container__content__text__action",children:(0,i.__)("Continue shopping","woo-vipps")})})]})]})})})}function p({continueShoppingUrl:e,logo:r}){return(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page",children:(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container",children:(0,c.jsxs)("div",{className:"vipps-recurring-payment-redirect-page__container__content",children:[(0,c.jsx)("div",{className:"vipps-recurring-payment-redirect-page__container__content__logo",children:(0,c.jsx)("img",{src:r,alt:"Logo"})}),(0,c.jsxs)("div",{className:"vipps-recurring-payment-redirect-page__container__content__text",children:[(0,c.jsx)("p",{children:(0,c.jsx)("h1",{className:"vipps-recurring-payment-redirect-page__container__content__text__heading",children:(0,i.__)("An error occurred","woo-vipps")})}),(0,c.jsx)("p",{children:(0,i.__)("An unknown error has occurred.","woo-vipps")}),(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:e,className:"btn button vipps-recurring-payment-redirect-page__container__content__text__action",children:(0,i.__)("Continue shopping","woo-vipps")})})]})]})})})}function o(){const{logo:e,continueShoppingUrl:n}=window.VippsMobilePaySettings,i=new URLSearchParams(window.location.search),[o,_]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1),[g,u]=(0,r.useState)(0),m=(0,r.useRef)(null),v=(0,r.useCallback)((()=>{t()({path:`/vipps-mobilepay-recurring/v1/orders/status/${i.get("order_id")}?key=${i.get("key")}`,method:"GET"}).then((e=>_(e))).catch((()=>{u((e=>e+1))}))}),[]);(0,r.useEffect)((()=>(v(),m.current=setInterval(v,1e4),()=>clearInterval(m.current))),[]),(0,r.useEffect)((()=>{d(g>=4)}),[g]),(0,r.useEffect)((()=>{l?clearInterval(m.current):o&&"PENDING"!==o.status&&!h&&(clearInterval(m.current),o.redirect_url&&(window.location.href=o.redirect_url))}),[o,l]);const h=(0,r.useMemo)((()=>!!o&&["EXPIRED","STOPPED"].includes(o.status)),[o]);return(0,c.jsxs)(c.Fragment,{children:[!l&&(0,c.jsx)(c.Fragment,{children:h?(0,c.jsx)(s,{logo:e,continueShoppingUrl:n}):(0,c.jsx)(a,{logo:e})}),l&&(0,c.jsx)(p,{logo:e,continueShoppingUrl:n})]})}var _,l;document.getElementById("vipps-mobilepay-recurring-app")&&(_=document.querySelector("#vipps-mobilepay-recurring-app"),l=(0,c.jsx)(o,{}),r.createRoot?(0,r.createRoot)(_).render(l):(0,r.render)(l,_))})();