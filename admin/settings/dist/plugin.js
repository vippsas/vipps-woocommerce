(function(y,V){"use strict";var C=document.createElement("style");C.textContent=`.vipps-mobilepay-react-admin-page{color:#161225;font-family:Vipps Text,Roboto,Helvetica,Arial,sans-serif}.vipps-mobilepay-react-loading{display:inline-block;position:relative;width:20px;height:20px}.vipps-mobilepay-react-loading div{box-sizing:border-box;display:block;position:absolute;width:16px;height:16px;margin:2px;border:2px solid #666;border-radius:50%;animation:vipps-mobilepay-react-loading 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:#666 transparent transparent transparent}.vipps-mobilepay-react-loading div:nth-child(1){animation-delay:-.45s}.vipps-mobilepay-react-loading div:nth-child(2){animation-delay:-.3s}.vipps-mobilepay-react-loading div:nth-child(3){animation-delay:-.15s}@keyframes vipps-mobilepay-react-loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.vipps-mobilepay-react-form-field{margin-bottom:2rem;display:flex;gap:2rem}.vipps-mobilepay-react-form-field>label{width:15%}.vipps-mobilepay-react-form-field>div{width:85%}.vipps-mobilepay-react-col{display:flex;flex-direction:column;gap:.5rem}.vipps-mobilepay-react-label{font-weight:600;color:#1d2327;font-size:14px}.vipps-mobilepay-react-tab-description{margin-bottom:1rem}.vipps-mobilepay-react-field-description{color:#666}.vipps-mobilepay-react-button-actions{display:flex;column-gap:1rem}.vipps-mobilepay-react-notification-banner{padding:1rem;min-height:40px;font-size:1rem;display:flex;align-items:center}.vipps-mobilepay-react-notification-banner-error{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.vipps-mobilepay-react-notification-banner-warning{background-color:#fff3cd;color:#856404;border:1px solid #ffeeba}.vipps-mobilepay-react-notification-banner-success{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.vipps-mobilepay-react-save-section{display:flex;align-items:center;gap:1rem}.vipps-mobilepay-react-save-confirmation{display:flex;align-items:center;gap:.5rem;color:#2a8947;font-weight:500}.vipps-mobilepay-react-save-confirmation .dashicons{font-size:1.2rem;width:auto;height:auto}.vipps-mobilepay-form-container{display:flex;flex-direction:row;align-items:flex-start;gap:12%}.vipps-mobilepay-react-form-field{display:flex;flex-direction:row;justify-content:flex-start}.vipps-mobilepay-form-help-box{background-color:#fff;border-color:#8c8f94;border-radius:4px;border:1px solid #8c8f94;padding:30px;width:13rem}.vipps-mobilepay-form-help-box a{text-wrap:nowrap}.vipps-mobilepay-react-checkout-confirm .body{display:flex;flex-direction:row;justify-content:flex-start;gap:12%}.vipps-mobilepay-react-checkout-confirm h1{margin-bottom:1em}.vipps-mobilepay-react-checkout-confirm li{list-style:inside;margin-left:1em}.vipps-mobilepay-react-checkout-confirm img{width:60rem;display:flex;align-items:center;justify-content:center}
`,document.head.appendChild(C);var S={},I=V;S.createRoot=I.createRoot,S.hydrateRoot=I.hydrateRoot;const K=window;if(!K.VippsMobilePayReactTranslations)throw new Error("VippsMobilePayReactTranslations not found, make sure to include this using wp_localize_script()");if(!K.VippsMobilePayReactOptions)throw new Error("VippsMobilePayReactOptions not found, make sure to include this using wp_localize_script()");if(!K.VippsMobilePayReactMetadata)throw new Error("VippsMobilePayReactMetadata not found, make sure to include this using wp_localize_script()");function t(e){let n=K.VippsMobilePayReactTranslations;const i=e.split(".");for(const a of i)if(typeof n=="object"&&n!==null)n=n[a];else break;return n!==void 0?n:e}function F(e){var n;return((n=K.VippsMobilePayReactMetadata)==null?void 0:n[e])??null}const{VippsMobilePayReactTranslations:oe,VippsMobilePayReactOptions:W,VippsMobilePayReactMetadata:pe}=K;function L({tabs:e,onTabChange:n,activeTab:i}){return React.createElement("div",{className:"vippstabholder",id:"vippstabholder"},e.map((a,c)=>React.createElement("h3",{key:c,id:`woocommerce_vipps_${a}_options`,"aria-selected":a===i?"true":"false",className:`wc-settings-sub-title tab ${a===i?"active":""}`,title:a,onClick:()=>n(a),style:{cursor:"pointer"}},a)))}function P(e){switch(e){case"NO":return"Vipps";case"FI":return"MobilePay";case"DK":return"MobilePay"}return"MobilePay"}const T=y.createContext(null);function z({children:e}){const[n,i]=y.useState(W);function a(s){const r=n[s],m=s+".default",v=t(m),R=v!=m?v:null;return r??R??""}function c(s){const r=s+".default";return t(r)!=r}async function l(s,r){console.log("setOption called:",{key:s,value:r}),i(m=>({...m,[s]:r??null}))}async function p(s){i(s)}async function d(s){console.log("submitChanges - Current values:",n),s!=null&&s.forceEnable&&(l("enabled","yes"),n.enabled="yes");const r=document.getElementById("vippsadmin_nonce").value,m=new URLSearchParams({action:"vipps_update_admin_settings",vippsadmin_nonce:r});for(const[f,w]of Object.entries(n)){const O="values["+f+"]";w?m.append(O,w):m.append(O,"")}const R=await(await fetch(F("admin_url"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"include",body:m.toString()})).json();return console.log("submitChanges - Server response:",R),R}return React.createElement(T.Provider,{value:{setOption:l,getOption:a,hasOption:c,setOptions:p,submitChanges:d}},e)}function h(){const e=y.useContext(T);if(!e)throw new Error("useWP must be used within a WPOptionsProvider");return e}function _({htmlString:e,className:n=""}){return React.createElement("span",{className:[n].join(" "),dangerouslySetInnerHTML:{__html:e}})}function H(){return React.createElement("div",{className:"vipps-mobilepay-react-loading"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null))}function q(e){return React.createElement("input",{...e,className:["input-text regular-input",e.className??""].join(" "),style:{height:30}},e.children)}function D(e){return React.createElement("form",{...e,className:["",e.className??""].join(" ")},e.children)}function k(e){return React.createElement("label",{...e,className:["vipps-mobilepay-react-label",e.className??""].join(" ")},e.children)}function E({variant:e,isLoading:n,disabled:i,...a}){return React.createElement("button",{...a,disabled:n||i,className:[`button-${e}`,a.className??""].join(" ")},React.createElement("div",{style:{display:"flex",alignItems:"center"}},n&&React.createElement(H,null),React.createElement("span",null,a.children)))}function B({id:e,name:n,onChange:i,checked:a,children:c,className:l}){return React.createElement("input",{id:e,name:n,checked:a?j(a):void 0,onChange:p=>i(G(p.target.checked)),type:"checkbox",className:[l??""].join(" ")},c)}function Z(e){return React.createElement("select",{...e,className:[e.className??""].join(" ")},e.children)}function A(e){return React.createElement("option",{...e,className:[e.className??""].join(" ")},e.children)}function J(e){return React.createElement("textarea",{...e,className:[e.className??""].join(" ")},e.children)}function x(e){return React.createElement("div",{...e,className:["vipps-mobilepay-react-form-field",e.className??""].join(" ")},e.children)}function j(e){return e==="yes"}function G(e){return e?"yes":"no"}function o({name:e,titleKey:n,labelKey:i,descriptionKey:a}){const{getOption:c,setOption:l}=h();return React.createElement(x,null,React.createElement(k,{htmlFor:e},t(n)),React.createElement("div",{className:"vipps-mobilepay-react-col"},React.createElement("div",{className:"vipps-mobilepay-react-row-center"},React.createElement(B,{id:e,name:e,checked:c(e),onChange:p=>l(e,p)}),i&&React.createElement("label",{htmlFor:e},React.createElement(_,{htmlString:t(i)}))),a&&React.createElement(_,{className:"vipps-mobilepay-react-field-description",htmlString:t(a)})))}function g({name:e,titleKey:n,labelKey:i,descriptionKey:a,options:c,onChange:l,required:p=!1,includeEmptyOption:d=!1}){const{getOption:s,setOption:r}=h();return React.createElement(x,null,React.createElement(k,{htmlFor:e},t(n)),React.createElement("div",{className:"vipps-mobilepay-react-col"},React.createElement(Z,{id:e,name:e,onChange:m=>{r(e,m.target.value),l&&l(m)},required:p,value:s(e)},d&&React.createElement(A,{value:""}),c.map(m=>React.createElement(A,{key:m.value,value:m.value},m.label))),React.createElement("div",null,i&&React.createElement(_,{htmlString:t(i)})),a&&React.createElement(_,{className:"vipps-mobilepay-react-field-description",htmlString:t(a)})))}function u({name:e,titleKey:n,labelKey:i,descriptionKey:a,pattern:c,required:l,asterisk:p,type:d="text"}){const{getOption:s,setOption:r}=h(),[m,v]=y.useState(!1),R=!m&&p;return React.createElement(x,null,React.createElement(k,{htmlFor:e},t(n)),React.createElement("div",{className:"vipps-mobilepay-react-col"},React.createElement(q,{id:e,name:e,onChange:f=>r(e,f.target.value),value:s(e),pattern:c,required:l,onFocus:()=>v(!0),onBlur:()=>v(!1),type:R?"password":d}),React.createElement("div",null,i&&React.createElement(_,{htmlString:t(i)})),a&&React.createElement(_,{className:"vipps-mobilepay-react-field-description",htmlString:t(a)})))}function Q({name:e,titleKey:n,labelKey:i,descriptionKey:a,rows:c=5}){const{getOption:l,setOption:p}=h();return React.createElement(x,null,React.createElement(k,{htmlFor:e},t(n)),React.createElement("div",{className:"vipps-mobilepay-react-col"},React.createElement(J,{id:e,name:e,onChange:d=>p(e,d.target.value),value:l(e),rows:c}),React.createElement("div",null,i&&React.createElement(_,{htmlString:t(i)})),a&&React.createElement(_,{className:"vipps-mobilepay-react-field-description",htmlString:t(a)})))}function X(){const{setOption:e,getOption:n}=h();return React.createElement("div",null,React.createElement("p",{className:"vipps-mobilepay-react-tab-description"}),React.createElement(o,{name:"enabled",titleKey:"enabled.title",labelKey:"enabled.label"}),React.createElement(g,{name:"country",titleKey:"country.title",descriptionKey:"country.description",includeEmptyOption:!1,required:!0,onChange:i=>{const a=P(i.target.value);n("payment_method_name")||e("payment_method_name",a)},options:[{label:t("country.options.NO"),value:"NO"},{label:t("country.options.FI"),value:"FI"},{label:t("country.options.DK"),value:"DK"}]}),React.createElement(g,{name:"payment_method_name",titleKey:"payment_method_name.title",descriptionKey:"payment_method_name.description",includeEmptyOption:!1,required:!0,options:[{label:t("payment_method_name.options.Vipps"),value:"Vipps"},{label:t("payment_method_name.options.MobilePay"),value:"MobilePay"}]}),React.createElement(u,{name:"orderprefix",titleKey:"orderprefix.title",descriptionKey:"orderprefix.description",pattern:"[a-zA-Z0-9-]+",required:!0}),React.createElement(u,{asterisk:!0,name:"merchantSerialNumber",titleKey:"merchantSerialNumber.title",descriptionKey:"merchantSerialNumber.description"}),React.createElement(u,{asterisk:!0,name:"clientId",titleKey:"clientId.title",descriptionKey:"clientId.description"}),React.createElement(u,{asterisk:!0,name:"secret",titleKey:"secret.title",descriptionKey:"secret.description"}),React.createElement(u,{asterisk:!0,name:"Ocp_Apim_Key_eCommerce",titleKey:"Ocp_Apim_Key_eCommerce.title",descriptionKey:"Ocp_Apim_Key_eCommerce.description"}),React.createElement(g,{name:"result_status",titleKey:"result_status.title",descriptionKey:"result_status.description",options:[{label:t("result_status.options.on-hold"),value:"on-hold"},{label:t("result_status.options.processing"),value:"processing"}]}),React.createElement(Q,{name:"description",titleKey:"description.title",descriptionKey:"description.description",rows:5}),React.createElement(o,{name:"vippsdefault",titleKey:"vippsdefault.title",labelKey:"vippsdefault.label"}))}function Y(){return React.createElement("div",null,React.createElement("p",{className:"vipps-mobilepay-react-tab-description"},t("express_options.description")),React.createElement(o,{name:"cartexpress",titleKey:"cartexpress.title",labelKey:"cartexpress.title",descriptionKey:"cartexpress.description"}),React.createElement(g,{name:"singleproductexpress",titleKey:"singleproductexpress.title",descriptionKey:"singleproductexpress.description",options:[{value:"none",label:t("singleproductexpress.options.none")},{value:"some",label:t("singleproductexpress.options.some")},{value:"all",label:t("singleproductexpress.options.all")}]}),React.createElement(o,{name:"singleproductexpressarchives",titleKey:"singleproductexpressarchives.title",labelKey:"singleproductexpressarchives.label",descriptionKey:"singleproductexpressarchives.description"}),React.createElement(o,{name:"expresscheckout_termscheckbox",titleKey:"expresscheckout_termscheckbox.title",labelKey:"expresscheckout_termscheckbox.label",descriptionKey:"expresscheckout_termscheckbox.description"}),React.createElement(o,{name:"expresscheckout_always_address",titleKey:"expresscheckout_always_address.title",labelKey:"expresscheckout_always_address.label",descriptionKey:"expresscheckout_always_address.description"}),React.createElement(o,{name:"enablestaticshipping",titleKey:"enablestaticshipping.title",labelKey:"enablestaticshipping.label",descriptionKey:"enablestaticshipping.description"}),React.createElement(o,{name:"expresscreateuser",titleKey:"expresscreateuser.title",labelKey:"expresscreateuser.label",descriptionKey:"expresscreateuser.description"}),React.createElement(o,{name:"singleproductbuynowcompatmode",titleKey:"singleproductbuynowcompatmode.title",labelKey:"singleproductbuynowcompatmode.label",descriptionKey:"singleproductbuynowcompatmode.description"}),React.createElement(o,{name:"deletefailedexpressorders",titleKey:"deletefailedexpressorders.title",labelKey:"deletefailedexpressorders.label",descriptionKey:"deletefailedexpressorders.description"}))}function $(){const{getOption:e,hasOption:n}=h(),i=e("vcs_porterbuddy")==="yes",a=e("vcs_helthjem")==="yes",c=n("checkout_external_payments_klarna"),l=c;return React.createElement("div",null,React.createElement("p",{className:"vipps-mobilepay-react-tab-description"},React.createElement(_,{htmlString:t("checkout_options.description")})),React.createElement(o,{name:"vipps_checkout_enabled",titleKey:"vipps_checkout_enabled.title",labelKey:"vipps_checkout_enabled.label",descriptionKey:"vipps_checkout_enabled.description"}),React.createElement(o,{name:"checkoutcreateuser",titleKey:"checkoutcreateuser.title",labelKey:"checkoutcreateuser.label",descriptionKey:"checkoutcreateuser.description"}),React.createElement(o,{name:"enablestaticshipping_checkout",titleKey:"enablestaticshipping_checkout.title",labelKey:"enablestaticshipping_checkout.label",descriptionKey:"enablestaticshipping_checkout.description"}),React.createElement(o,{name:"requireUserInfo_checkout",titleKey:"requireUserInfo_checkout.title",labelKey:"requireUserInfo_checkout.label",descriptionKey:"requireUserInfo_checkout.description"}),React.createElement(o,{name:"noAddressFields",titleKey:"noAddressFields.title",labelKey:"noAddressFields.label",descriptionKey:"noAddressFields.description"}),React.createElement(o,{name:"noContactFields",titleKey:"noContactFields.title",labelKey:"noContactFields.label",descriptionKey:"noContactFields.description"}),l&&React.createElement(React.Fragment,null,React.createElement("h3",{className:"vipps-mobilepay-react-trab-description"},t("checkout_external_payment_title.title")),React.createElement("p",null,t("checkout_external_payment_title.description")),c&&React.createElement(o,{name:"checkout_external_payments_klarna",titleKey:"checkout_external_payments_klarna.title",labelKey:"checkout_external_payments_klarna.label",descriptionKey:"checkout_external_payments_klarna.description"})),React.createElement("h3",{className:"vipps-mobilepay-react-tab-description"},t("checkout_shipping.title")),React.createElement("p",null,t("checkout_shipping.description")),React.createElement(o,{name:"vcs_posten",titleKey:"vcs_posten.title",descriptionKey:"vcs_posten.description",labelKey:"vcs_posten.label"}),React.createElement(o,{name:"vcs_postnord",titleKey:"vcs_postnord.title",descriptionKey:"vcs_postnord.description",labelKey:"vcs_postnord.label"}),React.createElement(o,{name:"vcs_porterbuddy",titleKey:"vcs_porterbuddy.title",descriptionKey:"vcs_porterbuddy.description",labelKey:"vcs_porterbuddy.label"}),i&&React.createElement(React.Fragment,null,React.createElement(u,{asterisk:!0,name:"vcs_porterbuddy_publicToken",titleKey:"vcs_porterbuddy_publicToken.title",descriptionKey:"vcs_porterbuddy_publicToken.description"}),React.createElement(u,{asterisk:!0,name:"vcs_porterbuddy_apiKey",titleKey:"vcs_porterbuddy_apiKey.title",descriptionKey:"vcs_porterbuddy_apiKey.description"}),React.createElement(u,{name:"vcs_porterbuddy_phoneNumber",titleKey:"vcs_porterbuddy_phoneNumber.title",descriptionKey:"vcs_porterbuddy_phoneNumber.description"})),React.createElement(o,{name:"vcs_helthjem",titleKey:"vcs_helthjem.title",descriptionKey:"vcs_helthjem.description",labelKey:"vcs_helthjem.label"}),a&&React.createElement(React.Fragment,null,React.createElement(u,{type:"number",name:"vcs_helthjem_shopId",titleKey:"vcs_helthjem_shopId.title",descriptionKey:"vcs_helthjem_shopId.description"}),React.createElement(u,{name:"vcs_helthjem_username",titleKey:"vcs_helthjem_username.title",descriptionKey:"vcs_helthjem_username.description"}),React.createElement(u,{asterisk:!0,name:"vcs_helthjem_password",titleKey:"vcs_helthjem_password.title",descriptionKey:"vcs_helthjem_password.description"})))}function ee({onUpload:e}){return{handleImageUpload:()=>{const i=wp.media({library:{type:"image"},button:{},multiple:!1});i.on("select",()=>{const a=i.state().get("selection").first().toJSON();let c="";a.url?c=a.url:a.sizes&&a.sizes.thumbnail&&(c=a.sizes.thumbnail.url),c&&e(a.id,c)}),i.open()}}}function M({variant:e,text:n}){return React.createElement("div",{className:`vipps-mobilepay-react-notification-banner vipps-mobilepay-react-notification-banner-${e}`},Array.isArray(n)?n.map((i,a)=>React.createElement("p",{key:a},i)):React.createElement("p",null,n))}function te(){const{getOption:e,setOption:n}=h(),[i,a]=y.useState(null);function c(){n("receiptimage",""),n("receiptimage_url",""),a(null)}const{handleImageUpload:l}=ee({onUpload(s,r){const m=new Image;m.src=r,m.onload=()=>{if(m.height<167){a(t("receipt_image_error"));return}a(null),console.log("Image Upload - Setting values:",{id:s,url:r}),n("receiptimage",s),n("receiptimage_url",r)}}}),p=e("receiptimage"),d=e("receiptimage_url");return React.createElement("div",null,React.createElement("p",{className:"vipps-mobilepay-react-tab-description"},t("advanced_options.description")),React.createElement(o,{labelKey:"vippsorderattribution.label",name:"vippsorderattribution",titleKey:"vippsorderattribution.title",descriptionKey:"vippsorderattribution.description"}),React.createElement(g,{name:"vippsspecialpagetemplate",titleKey:"vippsspecialpagetemplate.title",descriptionKey:"vippsspecialpagetemplate.description",options:Object.entries(t("vippsspecialpagetemplate.options")).map(([s,r])=>({label:r,value:s||""}))}),React.createElement(g,{name:"vippsspecialpageid",titleKey:"vippsspecialpageid.title",descriptionKey:"vippsspecialpageid.description",options:Object.entries(t("vippsspecialpageid.options")).map(([s,r])=>({label:r,value:s||""}))}),React.createElement(o,{name:"sendreceipts",titleKey:"sendreceipts.title",labelKey:"sendreceipts.label",descriptionKey:"sendreceipts.description"}),i&&React.createElement(M,{variant:"error",text:i}),React.createElement(x,null,React.createElement(k,{htmlFor:"woocommerce_vipps_receiptimage"},t("receiptimage.title")),React.createElement("div",{className:"vipps-mobilepay-react-col"},React.createElement("div",null,p?React.createElement(React.Fragment,null,React.createElement("img",{src:d,id:p,style:{width:200}}),React.createElement(E,{type:"button",onClick:c,variant:"link"},t("remove_image"))):React.createElement(E,{type:"button",onClick:l,variant:"link"},t("upload_image")),React.createElement("input",{type:"hidden",name:"woocommerce_vipps_receiptimage",id:"woocommerce_vipps_receiptimage",value:p})),React.createElement("span",{className:"vipps-mobilepay-react-field-description"},t("receiptimage.description"),React.createElement("br",null),React.createElement("small",null,t("receipt_image_size_requirement"))))),React.createElement(o,{name:"use_flock",titleKey:"use_flock.title",descriptionKey:"use_flock.description",labelKey:"use_flock.label"}),React.createElement(o,{name:"developermode",titleKey:"developermode.title",descriptionKey:"developermode.description",labelKey:"developermode.label"}))}function ae(e){const[n,i]=y.useState(()=>window.location.hash),a=y.useCallback(()=>{i(window.location.hash)},[]);y.useEffect(()=>(window.addEventListener("hashchange",a),()=>{window.removeEventListener("hashchange",a)}),[a]);const c=y.useCallback(p=>{p!==n&&(window.location.hash="#"+p)},[n]);return y.useEffect(()=>{!n&&e&&c(e)},[n,e,c]),[decodeURIComponent(n.replace("#","")),c]}function ne(){return React.createElement("div",null,React.createElement("p",{className:"vipps-mobilepay-react-tab-description"},t("developertitle.description")),React.createElement(o,{name:"testmode",titleKey:"testmode.title",descriptionKey:"testmode.description",labelKey:"testmode.label"}),React.createElement(u,{name:"merchantSerialNumber_test",titleKey:"merchantSerialNumber_test.title",labelKey:"merchantSerialNumber_test.description"}),React.createElement(u,{asterisk:!0,name:"clientId_test",titleKey:"clientId_test.title",labelKey:"clientId_test.description"}),React.createElement(u,{asterisk:!0,name:"secret_test",titleKey:"secret_test.title",labelKey:"secret_test.description"}),React.createElement(u,{asterisk:!0,name:"Ocp_Apim_Key_eCommerce_test",titleKey:"Ocp_Apim_Key_eCommerce_test.title",labelKey:"Ocp_Apim_Key_eCommerce_test.description"}))}function ie({isLoading:e}){const{getOption:n,setOption:i}=h(),[a,c]=y.useState("ESSENTIAL");return React.createElement(React.Fragment,null,React.createElement("h3",{className:"vipps-mobilepay-react-tab-description"},t("initial_settings")),a==="ESSENTIAL"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"vipps-mobilepay-form-container"},React.createElement("div",{className:"vipps-mobilepay-form-col"},React.createElement(g,{name:"country",titleKey:"country.title",descriptionKey:"country.description",onChange:l=>{const p=P(l.target.value);i("payment_method_name",p)},required:!0,includeEmptyOption:!1,options:[{label:t("country.options.NO"),value:"NO"},{label:t("country.options.FI"),value:"FI"},{label:t("country.options.DK"),value:"DK"}]}),React.createElement(g,{name:"payment_method_name",titleKey:"payment_method_name.title",descriptionKey:"payment_method_name.description",required:!0,includeEmptyOption:!1,options:[{label:t("payment_method_name.options.Vipps"),value:"Vipps"},{label:t("payment_method_name.options.MobilePay"),value:"MobilePay"}]}),React.createElement(u,{asterisk:!0,name:"merchantSerialNumber",titleKey:"merchantSerialNumber.title",descriptionKey:"merchantSerialNumber.description",required:!0}),React.createElement(u,{asterisk:!0,name:"clientId",titleKey:"clientId.title",descriptionKey:"clientId.description",required:!0}),React.createElement(u,{asterisk:!0,name:"secret",titleKey:"secret.title",descriptionKey:"secret.description",required:!0}),React.createElement(u,{asterisk:!0,name:"Ocp_Apim_Key_eCommerce",titleKey:"Ocp_Apim_Key_eCommerce.title",descriptionKey:"Ocp_Apim_Key_eCommerce.description",required:!0}),React.createElement(o,{name:"vipps_checkout_enabled",titleKey:"vipps_checkout_enabled_simple.title",labelKey:"vipps_checkout_enabled_simple.label",descriptionKey:"vipps_checkout_enabled_simple.description"}),React.createElement(x,null,React.createElement(k,null),React.createElement("div",{className:"vipps-mobilepay-react-col"},React.createElement(E,{style:{alignSelf:"flex-start"},variant:"primary",type:"button",onClick:l=>{l.preventDefault();const p=l.currentTarget.closest("form");if(!p)throw new Error("Form not found");p.reportValidity()&&(j(n("vipps_checkout_enabled"))?c("CHECKOUT"):c("CHECKOUT_CONFIRM"))}},t("next_step"))))),React.createElement("div",{className:"vipps-mobilepay-form-col vipps-mobilepay-form-help-box"},React.createElement("div",null,React.createElement("strong",{className:"title"},t("help_box.get_started")),React.createElement("br",null),React.createElement("a",{href:"https://wordpress.org/plugins/woo-vipps/"},t("help_box.documentation")),React.createElement("br",null),React.createElement("a",{href:"https://portal.vippsmobilepay.com"},t("help_box.portal"))),React.createElement("br",null),React.createElement("div",null,React.createElement("strong",{className:"title"},t("help_box.support.title")),React.createElement("br",null),React.createElement("span",{dangerouslySetInnerHTML:{__html:t("help_box.support.description")}}))))),a==="CHECKOUT_CONFIRM"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"vipps-mobilepay-react-checkout-confirm"},React.createElement("h1",{className:"title"},React.createElement("strong",null,t("checkout_confirm.title"))),React.createElement("div",{className:"body"},React.createElement("div",{className:"list"},React.createElement("strong",null,t("checkout_confirm.paragraph1.header")),React.createElement("ul",null,React.createElement("li",null,t("checkout_confirm.paragraph1.first")),React.createElement("li",null,t("checkout_confirm.paragraph1.second")),React.createElement("li",null,t("checkout_confirm.paragraph1.third"))),React.createElement("strong",null,t("checkout_confirm.paragraph2.header")),React.createElement("ul",null,React.createElement("li",null,t("checkout_confirm.paragraph2.first")),React.createElement("li",null,t("checkout_confirm.paragraph2.second")))),React.createElement("img",{alt:t("checkout_confirm.img.alt")})),React.createElement("div",{className:"vipps-mobilepay-react-button-actions"},React.createElement(E,{variant:"secondary",type:"button",onClick:()=>c("ESSENTIAL")},t("previous_step")),React.createElement(E,{variant:"primary",isLoading:e,onClick:()=>c("CHECKOUT")},t("next_step"))))),a==="CHECKOUT"&&React.createElement(React.Fragment,null,"CHECKOUT",React.createElement("div",{className:"vipps-mobilepay-react-button-actions"},React.createElement(E,{variant:"secondary",type:"button",onClick:()=>c("ESSENTIAL")},t("previous_step")),React.createElement(E,{variant:"primary",isLoading:e},t("save_changes")))))}const ce=!0;function le(){const[e,n]=y.useState(!1),[i,a]=y.useState(),[c,l]=y.useState(!1),{submitChanges:p,getOption:d,setOptions:s}=h(),r=[t("main_options.title"),t("express_options.title"),t("checkout_options.title"),t("advanced_options.title")],m=d("developermode")==="yes";m&&r.push(t("developertitle.title"));const[v,R]=ae(r[0]);function f(N){return N===v}async function w(N){N.preventDefault(),n(!0),l(!1);try{const b=await p({forceEnable:U});console.log("handleSaveSettings - Response data:",b),!b.connection_ok||!b.form_ok?(a({text:b.connection_msg||b.form_errors,variant:"error"}),l(!1)):(a({text:b.connection_msg,variant:"success"}),l(!0),console.log("handleSaveSettings - Setting new options:",b.options),await s(b.options),se(O()),setTimeout(()=>{l(!1)},2e3))}catch(b){console.error("handleSaveSettings - Error:",b),a({text:b.message,variant:"error"}),l(!1)}finally{n(!1)}}function O(){const N=d("merchantSerialNumber")&&d("clientId")&&d("secret")&&d("Ocp_Apim_Key_eCommerce")&&d("country")&&d("payment_method_name"),b=d("merchantSerialNumber_test")&&d("clientId_test")&&d("secret_test")&&d("Ocp_Apim_Key_eCommerce_test")&&d("payment_method_name")&&d("country");return!N&&!b}const[U,se]=y.useState(()=>ce);return React.createElement(React.Fragment,null,i&&React.createElement(M,{variant:i.variant,text:i.text}),React.createElement(D,{onSubmit:w,className:"vippsAdminSettings"},U?React.createElement(ie,{isLoading:e}):React.createElement(React.Fragment,null,React.createElement(L,{tabs:r,onTabChange:R,activeTab:v}),f(r[0])&&React.createElement(X,null),f(r[1])&&React.createElement(Y,null),f(r[2])&&React.createElement($,null),f(r[3])&&React.createElement(te,null),m&&f(r[4])&&React.createElement(ne,null),React.createElement("div",{className:"vipps-mobilepay-react-save-section"},React.createElement(E,{variant:"primary",isLoading:e},t("save_changes")),c&&React.createElement("span",{className:"vipps-mobilepay-react-save-confirmation"},React.createElement("span",{className:"dashicons dashicons-yes"}),t("settings_saved"))))))}function re(){const e=F("page")==="admin_settings_page";return React.createElement("div",{className:"vipps-mobilepay-react-admin-page"},e&&React.createElement(z,null,React.createElement(le,null)))}S.createRoot(document.getElementById("vipps-mobilepay-react-ui")).render(y.createElement(y.StrictMode,null,y.createElement(re,null)))})(wp.element,wp.element);
