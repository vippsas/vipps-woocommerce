* WC_VIPPS_RECURRING_MAIN_FILE  is now recurring/recurring.php and no longer the plugin main file.
* WC_VIPPS_MAIN_FILE is now the plugin main file; *where apropriate* ensure the correct one is used

* Needs testing:
** activate, deactivate, uninstall

** aktiver recurring hvis subscriptions finnes

* Needs testing and working-out: 
** Webhooks!
** Callbacks!
** Checkout-pages!

** ISSUE WHEN USING KLARNA / PAY-FOR-ORDER and VIPPS RECURRING CHECKOUT
** LANGUAGE
** New settings-page for recurring

13 januar


AKTIVERING:

* Vi laster inn recurring hviss recurring *ikke* er lastet inn, og hvis subscriptions *er* lastet inn.
** så, i plugins-loaded, men veldig tidlig, så sjekker vi en "aktivitets"-ting for recurring. Hvis denne er *av* men skulle vært *på* kjører vi activate.
** hvis den er *på* men skulle vært *av* kjører vi deactivate.
** og så kjører vi deactivate når vi deaktiverer, også

includes/wc-vipps-recurring.php:		register_activation_hook( WC_VIPPS_MAIN_FILE, [ $instance, 'activate' ] );
includes/wc-vipps-recurring.php:		register_deactivation_hook( WC_VIPPS_MAIN_FILE, [ $instance, 'deactivate' ] );
includes/wc-vipps-recurring.php:	public function activate() {
includes/wc-vipps-recurring.php:	public static function deactivate() {

 public function activate() {
                global $wp_rewrite;
                $this->install();
                $wp_rewrite->flush_rules();
                add_option( 'woo-vipps-recurring-version', WC_VIPPS_RECURRING_VERSION );
        }


        public static function deactivate() {
                WC_Vipps_Recurring::get_instance()->gateway()->webhook_teardown();
        }

Det er også   public static function register_hooks() {

recurring.php:WC_Vipps_Recurring::register_hooks();
recurring.php:    WC_Vipps_Recurring_Checkout::register_hooks();

og det opprettes cron-schedules etc i init.

** FOR Å KUNNE DEAKTIVERE må vi faktisk laste selv om subscriptions ikke er der - hvis tilstand var "aktiv"


** "har blitt aktivert":
1. ER AKTIVERINGS-VERDI SATT? JA
2. ER RECURRING AKTIV? => ja

** "har ikke blitt aktivert":
1. ER AKTIVERINGSVERDI SATT? Nei
2. OGSÅ, ER RECURRING AKTIV? Nei

** "skal aktiveres":
1. "har ikke blitt aktivert",
2. "woocommerce subscriptions er aktiv"

** "skal deaktiveres":
1. "har blitt aktivert"
2. "recurring-plugin ikke aktiv"
3. "woocommerce subscriptoins er inaktiv"
4. "hele pluginen deaktiveres".


$instance = WC_Vipps_Recurring::get_instance();


** så det er TRE TING:
** 1. Skal vi *laste inn* recurring?
** 2. Skal vi *aktivere* recurring?
** 3. Skal vi *deaktivere* recurring?
** 4. Og noter riktig tilstand



